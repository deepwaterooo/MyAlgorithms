#+latex_class: cn-article
#+latex_header: \lstset{language=c++,numbers=left,numberstyle=\tiny,basicstyle=\ttfamily\small,tabsize=4,frame=none,escapeinside=``,extendedchars=false,keywordstyle=\color{blue!70},commentstyle=\color{red!55!green!55!blue!55!},rulesepcolor=\color{red!20!green!20!blue!20!}}
#+title: Algorithms Review for Job Interview
#+author: Jenny Huang

* 12/20/2014, Saturday
- Pity that Chinese is not shown in github with org-mode
- Begin to review for job Interview
- test Chinese
- test code

* 我是中国人
#+begin_latex
\begin{lstlisting}
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>

#define SIZE 8   // Size by SIZE matrices

using namespace std;
 
int main(int argc, char* argv[]) {
    pthread_t* thread;  // pointer to a group of threads
    int i;
    if (argc!=2) {    
        printf("Usage: %s number_of_threads\n",argv[0]);
        exit(-1);
    }
    num_thrd = atoi(argv[1]);
    printf("num_thrd: %d\n", num_thrd);
    init_matrix(A);
    printf("\n");
    init_matrix(B);
    thread = (pthread_t*) malloc(num_thrd*sizeof(pthread_t));
    
    for (i = 1; i < num_thrd; i++) {    
        //printf("address i: %d\n", i);
        int rc = pthread_create(&thread[i], NULL, multiply, &idx[i]);
        if (rc != 0) {
            perror("Can't create thread");
            free(thread);
            exit(-1);
        }
    }
 
    // main thread works on slice 0
    // so everybody is busy
    // main thread does everything if threadd number is specified as 1
    //int tmp = 0;
    multiply((void*)(&(idx[0])));

    // main thead waiting for other thread to complete
    for (i = 2; i <= num_thrd; i++)
        pthread_join(thread[i-1], NULL);
 
    printf("\n\n");
    print_matrix(A);
    printf("\n\n\t       * \n");
    print_matrix(B);
    printf("\n\n\t       = \n");
    print_matrix(C);
    printf("\n\n");
 
    free(thread);
 
    return 0;
}
\end{lstlisting}
#+end_latex
